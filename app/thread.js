importScripts("sha256.js","avalon.js");var thread={enable:!0,update:!1,nonce2:0,newJob:function(b,a,c){thread.update=!0;thread.enable=!0;thread.job=b;thread.jobId=a;thread.poolId=c;thread.nonce2=0;thread.update=!1;thread.nonce2_limit=Math.pow(2,8*thread.job.nonce2_size)}};onmessage=function(b){switch(b.data){case "pause":thread.enable=!1;break;case "resume":thread.enable=!0;break;default:thread.newJob(b.data.job,b.data.jobId,b.data.poolId)}};
(function loop(){if(thread.enable&&!thread.update&&void 0!==thread.job&&thread.nonce2<thread.nonce2_limit){for(var a=get_blockheader(thread.job,thread.nonce2),c=get_midstate(a),a=gw_pool2raw(c,a,thread.poolId,thread.jobId,thread.nonce2),c=[],e=Math.ceil(a.byteLength/33),d=1;d<e+1;d++)c.push(mm_encode(P_WORK,0,d,e,a.slice(32*(d-1),32*d)));postMessage(c);thread.nonce2=(thread.nonce2+1)%thread.nonce2_limit}setTimeout(loop,2)})();
